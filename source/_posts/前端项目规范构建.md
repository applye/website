---
abbrlink: 8
title: å‰ç«¯é¡¹ç›®è§„èŒƒæ„å»º
categories: å‰ç«¯
tags:
    - 'husky'
    - 'lint'
    - 'commit'
comments: false
date: 2019-04-15 23:47:20
img: 'https://raw.githubusercontent.com/879733672/images/cdn/img/202304282214836.png'
---

### å‰ç«¯é¡¹ç›®è§„èŒƒæ„å»º

è§„èŒƒåŒ–æäº¤ä¿¡æ¯çš„å·¥å…·ï¼Œå½“æˆ‘ä»¬åœ¨å¤šäººåä½œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰å¿…è¦å…»æˆè‰¯å¥½çš„ commit è§„èŒƒï¼Œæ–¹ä¾¿æ—¥å review ä»£ç ï¼Œäº§å‡º CHANGELOG è¯´æ˜ç­‰ç­‰ï¼›
é¦–å…ˆï¼Œè§„èŒƒçš„ commit ä¿¡æ¯èƒ½è®©äººä¸€çœ¼æ¸…æ™°æ˜äº†çš„çŸ¥é“è¯¥æäº¤å±äºä»€ä¹ˆç±»å‹ã€ä¿®æ”¹èŒƒå›´ã€å…·ä½“æ”¹åŠ¨ï¼Œæé«˜å›¢é˜Ÿåä½œã€‚ä¹Ÿæ–¹ä¾¿æˆ‘ä»¬æ—¥åæ‰¾ bugï¼Œæé«˜å›¢é˜Ÿåä½œ. å¤§å®¶ä½¿ç”¨è¾ƒå¤šçš„[Angular å›¢é˜Ÿè§„èŒƒ](https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines)ã€‚

#### Angluar commit message è§„èŒƒ

è¯¥è§„èŒƒå°† commit ä¿¡æ¯åˆ†ä¸º headerã€bodyã€footer ä¸‰ä¸ªéƒ¨åˆ†ã€‚
è¿™ä¸‰éƒ¨åˆ†ä¸­å“ªä¸€è¡Œéƒ½ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦ï¼(angular è§„èŒƒæ–‡æ¡£ä¸­å†™çš„). å› ä¸º git ä¼šå°† commit çš„ä¸»é¢˜éƒ¨åˆ†è¶…è¿‡ 72 ä¸ªå­—ç¬¦çš„æˆªæ–­æ˜¾ç¤º.

Angluar commit message æ ¼å¼å¦‚ä¸‹ï¼š

```
<type>(<scope>): <subject> // è¿™ä¸€è¡Œæ˜¯Header
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

Body éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œ ä¸ºé€‰å¡«é¡¹ï¼Œ æŒ‡æœ¬æ¬¡æäº¤çš„å…·ä½“æè¿°ã€‚

header åˆ†ä¸º typeã€scopeã€subject ä¸‰éƒ¨åˆ†ã€‚

(1) type æŒ‡æœ¬æ¬¡æäº¤çš„ç±»å‹ï¼Œä¸ºå¿…å¡«é¡¹ï¼Œå¿…é¡»ä¸ºä»¥ä¸‹ä¹‹ä¸€:

-   feat: ä¸€é¡¹æ–°åŠŸèƒ½
-   fix: ä¸€ä¸ªé”™è¯¯ä¿®å¤
-   docs: ä»…æ–‡æ¡£æ›´æ”¹
-   style: ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºç™½ï¼Œæ ¼å¼ï¼Œç¼ºå°‘åˆ†å·ç­‰ï¼‰
-   refactor: æ—¢ä¸ä¿®æ­£é”™è¯¯ä¹Ÿä¸å¢åŠ åŠŸèƒ½çš„ä»£ç æ›´æ”¹ï¼ˆé‡æ„ï¼‰
-   perf: æ”¹è¿›æ€§èƒ½çš„ä»£ç æ›´æ”¹
-   test: æ·»åŠ ç¼ºå¤±æˆ–æ›´æ­£ç°æœ‰æµ‹è¯•
-   build: å½±å“æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–é¡¹çš„æ›´æ”¹ï¼ˆgulpï¼Œnpm ç­‰ï¼‰
-   ci: å¯¹ CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„æ›´æ”¹
-   chore: æ›´æ”¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“ï¼Œä¾‹å¦‚æ–‡æ¡£ç”Ÿæˆ
    (2) scope æŒ‡æœ¬æ¬¡æäº¤çš„å½±å“èŒƒå›´ï¼Œä¸ºå¯é€‰é¡¹ï¼Œå¯ä»¥æ˜¯æŒ‡å®šæäº¤æ›´æ”¹ä½ç½®çš„ä»»ä½•å†…å®¹ã€‚æˆ‘ä¸€èˆ¬éƒ½å†™æ›´æ”¹éƒ¨åˆ†çš„æ¨¡å—åæˆ–è€…æ–‡ä»¶å. å½“æ›´æ”¹å½±å“çš„èŒƒå›´ä¸æ­¢ä¸€ä¸ªèŒƒå›´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ˜Ÿå·(\*)ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä¸å¡«å†™.

(3) subject æŒ‡æœ¬æ¬¡æäº¤çš„ç®€è¦æè¿°ï¼Œå®ƒæœ‰å¦‚ä¸‹ä¸¤ä¸ªè§„åˆ™ã€‚ ä¸è¦å¤§å†™ç¬¬ä¸€ä¸ªå­—æ¯; æœ«å°¾æ²¡æœ‰ç‚¹ï¼ˆ.ï¼‰

Footer éƒ¨åˆ† é€‰å¡« å¯ä»¥åŒ…å«ä»¥ä¸‹ä¸¤ç§æƒ…å†µ
(1) æ˜¯å¦äº§ç”Ÿäº†ç ´åæ€§ä¿®æ”¹
å¦‚æœå½“å‰ä»£ç ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ï¼Œå¦‚ç‰ˆæœ¬å‡çº§ã€æ¥å£å‚æ•°å‡å°‘ã€æ¥å£åˆ é™¤ã€è¿ç§»ç­‰å°±æ˜¯ç ´åæ€§ä¿®æ”¹ã€‚

å¦‚æœæ˜¯ç ´åæ€§ä¿®æ”¹åˆ™ Footer éƒ¨åˆ†ä¼šä»¥ BREAKING CHANGE å¼€å¤´ï¼Œåé¢æ˜¯å¯¹å˜åŠ¨çš„æè¿°ã€ä»¥åŠå˜åŠ¨ç†ç”±å’Œè¿ç§»æ–¹æ³•ã€‚å¦‚ä¸‹ï¼š

```
BREAKING CHANGE: å˜åŠ¨çš„æè¿°\ç†ç”±\è¿ç§»æ–¹æ³•
```

(2) å…³é—­ Issue å¦‚æœå½“å‰ commit é’ˆå¯¹æŸä¸ª issueï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ Footer éƒ¨åˆ†å…³é—­è¿™ä¸ª issueï¼Œä¹Ÿå¯ä»¥å…³é—­å¤šä¸ª issueã€‚å¡«å†™æ ¼å¼å¦‚ä¸‹ï¼š

```
Close #ISSUE_ID
Closes #ISSUE_ID, #ISSUE_ID
```

ä»¥ä¸Šæ˜¯ Angular å›¢é˜Ÿçš„ commit è§„èŒƒï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±å›¢é˜Ÿçš„ä¹ æƒ¯å»è‡ªå®šä¹‰ commit è§„èŒƒã€‚

#### è‡ªå®šä¹‰ commit message è§„èŒƒ

è‡ªå®šä¹‰çš„è§„èŒƒæ˜¯åŸºäº Angluar è§„èŒƒçš„ï¼Œåªæ˜¯åœ¨å®ƒçš„åŸºç¡€ä¸ŠåŠ ä¸ªè¡¨æƒ… gitmoji å­—æ®µåœ¨æœ€æ‰“å¤´çš„ä½ç½®ã€‚æ ¼å¼å¦‚ä¸‹ï¼š

```
:gitmoji: <type>(<scope>): <subject> // è¿™ä¸€è¡Œæ˜¯Header
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

gitmoji é¡¹æ˜¯å¿…å¡«çš„ï¼Œå€¼åªèƒ½ä¸º gitmoji æä¾›çš„è¡¨æƒ…åˆ—è¡¨ä¸­çš„è¡¨æƒ…ã€‚

Angluar è§„èŒƒé‡Œä¹Ÿæœ‰å†™è¡¨æƒ…çš„ï¼Œè¦å€ŸåŠ© git-czï¼Œ å®ƒæ˜¯åœ¨ subject æ‰“å¤´æ˜¾ç¤ºçš„è¡¨æƒ…ï¼Œè·Ÿæˆ‘æƒ³è¦çš„æ•ˆæœä¸ç¬¦åˆ.

#### å®‰è£… commitizen

1. å®‰è£… commitizen
   commitizen å®ƒä¼šæä¾› git cz å‘½ä»¤æ›¿ä»£æˆ‘ä»¬çš„ git commit å‘½ä»¤ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´åŠ æ–¹ä¾¿ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ commit messageã€‚
   åˆå§‹åŒ– commitizen é¢„è®¾ï¼Œè¿™é‡Œä½¿ç”¨å®˜ç½‘é¦–é€‰çš„é¢„è®¾ cz-conventional-changelog
   cz-conventional-changelog: å®ƒæ˜¯ commitizen çš„é¦–é€‰é€‚é…å™¨ï¼Œé»˜è®¤æœ‰é…ç½®ï¼Œä½†ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ typesï¼Œè®¾ç½® header é•¿åº¦ä¹‹ç±»çš„å±æ€§ç­‰ã€‚ä½†æ˜¯å®ƒçš„æç¤ºä¿¡æ¯éƒ½æ˜¯è‹±æ–‡çš„ï¼Œä¸èƒ½è‡ªå®šä¹‰é…ç½®ï¼ˆæºç å†…å‘ç°çš„ï¼‰ã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®æç¤ºä¿¡æ¯éœ€è¦ä½¿ç”¨ cz-customizable é€‚é…å™¨ï¼Œæ–‡ç« åé¢è‡ªå®šä¹‰ç‰ˆæœ‰è¿™éƒ¨åˆ†å†…å®¹ã€‚

```
npm install --save-dev commitizen cz-customizable
```

åœ¨ package.json åŠ ä¸Šé…ç½®ä½¿ç”¨ node_modules/cz-customizable é€‚é…å™¨

```
 "config": {
    "commitizen": {
      "path": "node_modules/cz-customizable"
    }
  }
```

cz-customizable é»˜è®¤ä¼šå»è¯»å–é¡¹ç›®ä¸­.cz-config.js é…ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦æ–°å»ºæ–‡ä»¶.cz-config.jsï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬åªè¦å¤åˆ¶é‡Œé¢çš„å†…å®¹åšä¸€ä¸‹ä¿®æ”¹å¤„ç†å³å¯ï¼ˆæ¯”å¦‚æ±‰åŒ– or åŠ ä¸Š gitmoji è¡¨æƒ…ï¼‰ã€‚

å¦‚ä¸‹ï¼š

```
'use strict';

module.exports = {
      // å¯é€‰ç±»å‹
  types: [
    { value: ':sparkles:', name: 'âœ¨  feat:  æ–°åŠŸèƒ½' },
    { value: ':bug: fix', name: 'ğŸ›  fix:  ä¿®å¤' },
    { value: ':memo: memo', name: 'ğŸ“  memo:  æ’°å†™æ–‡æ¡£' },
    { value: ':art: style', name: 'ğŸ¨  ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)' },
    {
      value: ':hammer: refactor',
      name: 'ğŸ”¨  refactor:  é‡æ„(æ—¢ä¸æ˜¯å¢åŠ featureï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)'
    },
    { value: ':fire: fire', name: 'ğŸ”¥  fire:  ç§»é™¤ä»£ç æˆ–æ–‡ä»¶'},
    { value: ':wrench: wrench', name: 'ğŸ”§  wrenchï¼š ä¿®æ”¹é…ç½®æ–‡ä»¶' },
    { value: ':zap: zap', name: 'âš¡ï¸  zap:  æ€§èƒ½ä¼˜åŒ–' },
    { value: ':white_check_mark: test', name: 'âœ…  test:  å¢åŠ æµ‹è¯•' },
    { value: ':construction_worker: construction_worker', name: 'ğŸ‘·  construction_worker:  æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨' },
    { value: ':heavy_plus_sign: heavy_plus_sign', name: "â•  heavy_plus_sign:  æ·»åŠ ä¸€ä¸ªä¾èµ–é¡¹" },
    { value: ':globe_with_meridians: globe_with_meridians', value: 'ğŸŒ  globe_with_meridians:  å›½é™…åŒ–ä¸æœ¬åœ°åŒ– '},
    { value: ':rewind: rewind', name: 'âªï¸  rewind:   å›é€€' },
    { value: ':package: package', name: 'ğŸ“¦ï¸  package:    æ‰“åŒ…' }
  ],
  // æ¶ˆæ¯æ­¥éª¤
  messages: {
    type: 'è¯·é€‰æ‹©æäº¤ç±»å‹:',
    customScope: 'è¯·è¾“å…¥ä¿®æ”¹èŒƒå›´(å¯é€‰):',
    subject: 'è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«):',
    body: 'è¯·è¾“å…¥è¯¦ç»†æè¿°(å¯é€‰):',
    footer: 'è¯·è¾“å…¥è¦å…³é—­çš„issue(å¯é€‰):',
    confirmCommit: 'ç¡®è®¤ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯æäº¤ï¼Ÿ(y/n/e/h)'
  },
  // è·³è¿‡é—®é¢˜
  skipQuestions: ['body', 'footer'],
  // subjectæ–‡å­—é•¿åº¦é»˜è®¤æ˜¯72
  subjectLimit: 72
};
```

æˆ‘ä»¬çœ‹ä¸‹æ•ˆæœ:

```
git add .             // éœ€è¦addå…ˆ
npx git cz            // æ³¨æ„ï¼šä½¿ç”¨npxå‘½ä»¤
```

![](https://raw.githubusercontent.com/879733672/images/cdn/img/202210181127562.png)
æ­£å¸¸ git æµç¨‹åº”è¯¥æ˜¯ git add . > git commit -m 'xx', è¿™é‡Œæˆ‘ä»¬ç”¨ npx git cz å–ä»£ git commit æ“ä½œ

#### æäº¤æ ¡éªŒ

1. Install husky

husky æ˜¯ä¸€ä¸ª Git hooks å·¥å…·,å†…ç½®äº†è®¸å¤šé’©å­å¤„ç†å‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨ git commit çš„æ—¶å€™éœ€è¦æ ¡éªŒ commit ä¿¡æ¯ï¼Œè¿™æ—¶å€™ husky å°±æ´¾ä¸Šç”¨åœºäº†ã€‚

```
npm install husky --save-dev
```

2. å¯ç”¨é’©å­

```
npx husky install
```

å®Œæˆåé¡¹ç›®æ ¹ç›®å½•ä¸‹åº”è¯¥ä¼šæœ‰ä¸€ä¸ª.husky æ–‡ä»¶å¤¹ã€‚

3. å®‰è£… commitlint

    ```
    npm install --save-dev @commitlint/{config-conventional,cli}
    ```

    - é…ç½® commitlint
      é¡¹ç›®æ ¹ç›®å½•åˆ›å»º commitlint.config.jsã€‚å¯è‡ªè¡Œé…ç½®è§„åˆ™. é…ç½®å£°æ˜ç»§æ‰¿ cz

    ```
    module.exports = {
        extends: ['cz'],
        rules: {
            'type-empty': [2, 'never'],
            'subject-empty': [2, 'never']
        }
    };
    ```

    - ç¼–è¾‘ package.json æ–‡ä»¶ã€‚

    ```
    {
    "scripts": {
        "prepare": "husky install"
    },
    "husky": {
        "hooks": {
        "commit-msg": "commitlint -E $HUSKY_GIT_PARAMS",
        "pre-commit": "lint-staged" // ä¸‹ä¸€ç¯‡ä¼šæœ‰è¯´ï¼Œå¯åœ¨commitå‰æ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤
        }
    }
    }
    ```

    prepare è¯¥é…ç½®å¯ä»¥å°†ä¸‹è½½å…¶ä»–ä¾èµ–å®Œæˆæ—¶è‡ªåŠ¨å¯ç”¨ git é’©å­

    - æ·»åŠ  husky
      // åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ

    ```
    npx husky add .husky/commit-msg 'npx --no -- commitlint --edit $1';
    ```

    - è¿è¡Œç»“æœï¼š
      å‘ç°æ˜¯ commitlint ä¸æ”¯æŒ emoji è¡¨æƒ…ï¼Œé‚£æˆ‘ä»¬æŠŠä¸Šé¢çš„.cz-config.js é‡Œçš„ emoji è¡¨æƒ…å»æ‰å°±å¯ä»¥äº†ã€‚

    é‚£æˆ‘ä»¬æƒ³è¦æ”¯æŒ emoji è¡¨æƒ…æ ¡éªŒæ€ä¹ˆåŠï¼Ÿè¯·çœ‹ç¬¬ä¸‰æ­¥ï¼š

    - æ”¯æŒ emoji è¡¨æƒ…æ ¡éªŒ
      å¦‚æœ commit ä¿¡æ¯æ²¡æœ‰è¡¨æƒ…ï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤

    ```
    npm i -D commitlint-config-gitmoji @commitlint/core
    ```

    - é…ç½®æ–‡ä»¶ä¿®æ”¹

    é…ç½® commitlint.config.jsã€‚å¯è‡ªè¡Œé…ç½®è§„åˆ™. é…ç½®å£°æ˜ç»§æ‰¿ cz

    ```
    module.exports = {
        extends: ['gitmoji', 'cz'],  // é…ç½®è¡¨æƒ…éœ€è¦ä¾èµ–
        rules: {
            'type-empty': [2, 'never'],
            'subject-empty': [2, 'never']
        }
    };
    ```

    - è¿è¡Œ npm run commit // package.json scripts é…ç½®ï¼š "commit": "git-cz" æ˜¾ç¤ºé…ç½®çš„æäº¤ä¿¡æ¯
      ![](https://raw.githubusercontent.com/879733672/images/cdn/img/202210181437621.png)

    - ç”Ÿæˆæ—¥å¿— conventional-changelog, é»˜è®¤ä¸å¸¦å›¾æ ‡æ ‡é¢˜ï¼Œå¯ä»¥æ­£å¸¸ç”Ÿæˆï¼Œå¦‚æœå¸¦äº†å›¾æ ‡éœ€è¦æ·»åŠ é€‚é…ï¼Œæ‰èƒ½æ­£å¸¸ç”Ÿæˆã€‚
      package.json é…ç½®å¦‚ä¸‹ï¼š

    ```
    npm i -D conventional-changelog-cli conventional-changelog-gitmoji-config
    ```

    ```
       "scripts": {
            "changelog": "conventional-changelog -p gitmoji-config -i CHANGELOG.md -s -r 0",
        },
    ```

    // "changelog": "conventional-changelog -p gitmoji-config -i CHANGELOG.md -s -r 0", æ¯æ¬¡é‡æ–°ç”Ÿæˆæ—¥å¿—

    // "changelog": "conventional-changelog -p gitmoji-config -i CHANGELOG.md -s, æ¯æ¬¡è¿½åŠ æ—¥å¿—

    - è¿è¡Œ npm run changelog ç”Ÿæˆæ—¥å¿—ã€‚

    - standard-version ä½¿ç”¨
      å½“æˆ‘ä»¬è¦å‘å¸ƒç‰ˆæœ¬çš„æ—¶å€™ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ï¼Œæ›´æ–° package.json é‡Œçš„ç‰ˆæœ¬å·ï¼Œæ›´æ–° CHANGELOGï¼Œæè¿°äº†æ›´æ–°äº†ä»€ä¹ˆæ“ä½œï¼Œç„¶å git add -> git commit,æ‰“ä¸Š tag æ ‡ç­¾ï¼Œæœ‰äº† standard-version,å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨è·‘ä¸Šé¢æ“ä½œã€‚

    ```
    npm i --save-dev standard-version
    ```

    npx å‘½ä»¤å†™å…¥ package.json script ä¸­æ–¹ä¾¿è°ƒç”¨

    ```
     "scripts": {
        "release": "standard-version"
    },
    ```

    - ä¸º standard-version å¢åŠ --perset é…ç½®, é…ç½®å¸¦è¡¨æƒ…çš„

    ```
    "scripts": {
        "release": "standard-version --preset gitmoji-config",
    }
    ```

    - æ·»åŠ  package.json

    ```
    "commit": "git-cz",
    "release": "standard-version --preset gitmoji-config",   // åœ¨æ­¤åŸºç¡€ä¸Šå‡çº§ç‰ˆæœ¬ï¼Œå¹¶å†™å…¥æ—¥å¿—ï¼Œæ‰“åŒ…tag
    "push:publish": "npm run build && git push --follow-tags origin master && npm publish",
    ```

    - è¿è¡Œå¦‚ä¸‹ï¼š
      ![](https://raw.githubusercontent.com/879733672/images/cdn/img/202210181512828.png)

    - å½“æ‰§è¡Œ git push çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆ CHANGELOG.md ä¸€å¹¶æäº¤åˆ°è¿œç«¯äº†ï¼Œå°±ä¸ç”¨æ‰‹åŠ¨æ‰§è¡Œ npm run release å‘½ä»¤å† push äº†ã€‚
      ç›´æ¥åœ¨ pre-push é’©å­é‡Œæ‰§è¡Œç”Ÿæˆ CHANGELOG çš„å‘½ä»¤ã€‚
      npx husky add .husky/pre-push 'npm run release';
      .husky/pre-push

    ```
    #!/bin/sh

    npm run release
    ```

4. lint-staged prettier

    - å®‰è£… lint-staged prettier

    ```
    npm install lint-staged prettier --save-dev
    ```

    - é…ç½® package.json

    ```
    "scripts": {
        // æ–°å¢
        "lint-staged": "lint-staged",
    },
    "lint-staged": {
        "*.{js,ts,vue,jsx,tsx}": [   // ä»£ç æ ¼å¼åŒ–ï¼Œeslint æ£€æŸ¥
        "prettier --write",
        "eslint --cache --fix",
        "git add"
        ]
    },
    ```

    - æ·»åŠ  husky

    ```
    npx husky add .husky/pre-commit 'npm run lint-staged'
    ```
    é…ç½®å®Œæˆ
    --no-verify å¯ä»¥é…ç½®æœ¬æ¬¡æäº¤è·³è¿‡æ£€æŸ¥
    ```
    git commit -m 'æäº¤ä¿¡æ¯' --no-verify
    ```

5. jest æµ‹è¯•æ·»åŠ 
    ```
    npm install jest ts-jest @types/jest --save-dev
    ```
    jest.config.js
    ```
    module.exports = {
        preset: "ts-jest",
        testEnvironment: "node",
    };
    ```
    package.json
    ```
    "test": "jest",
    ```
  
6. eslinté…ç½®
    ```
    npm install eslint typescript-eslint/parser typescript-eslint/eslint-plugin --save-dev
    ```
   ä¿®æ”¹.eslintrc.js
   ```
   module.exports = {
        "env": {
        es2021: true,
        amd: true, // å¦åˆ™ä¼šå‡ºç°'require' is not defined æç¤º
        es6: true,
        browser: true,
        jquery: true,
        node: true,
        },
        "extends": [
        "eslint:recommended",
        "plugin:@typescript-eslint/recommended"
        ],
        "overrides": [],
        "parser": "@typescript-eslint/parser",
        "parserOptions": {
        "ecmaVersion": "latest",
        "sourceType": "module"
        },
        "plugins": [
        "@typescript-eslint"
        ],
        "rules": {
        "@typescript-eslint/no-unused-vars": [
        "error",
        {
        "varsIgnorePattern": "^_"
        }
        ],
        "@typescript-eslint/no-inferrable-types": "off",
        "no-unused-vars": "off",
        "no-console": "warn",
        "semi": "warn",
        //å…³é—­â€œç¦ç”¨ consoleâ€è§„åˆ™
        //ç¼©è¿›ä¸è§„èŒƒè­¦å‘Šï¼Œè¦æ±‚ç¼©è¿›ä¸º 2 ä¸ªç©ºæ ¼ï¼Œé»˜è®¤å€¼ä¸º 4 ä¸ªç©ºæ ¼
        indent: [
        'warn',
        4,
        {
        //è®¾ç½®ä¸º 1 æ—¶å¼ºåˆ¶ switch è¯­å¥ä¸­ case çš„ç¼©è¿›ä¸º 2 ä¸ªç©ºæ ¼
        SwitchCase: 1,
        },
        ],
        // å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼
        'space-before-function-paren': [0, 'always'],
        //å®šä¹‰å­—ç¬¦ä¸²ä¸è§„èŒƒé”™è¯¯ï¼Œè¦æ±‚å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·
        // quotes: ["error", "double"],
        //....
        //æ›´å¤šè§„åˆ™å¯æŸ¥çœ‹http://eslint.cn/docs/rules/
        }
   }

    ```
    package.json
    ```
    "lint": "eslint --ext .vue,.js,.jsx,.ts,.tsx ./src",
    "lint:fix": "eslint --ext .vue,.js,.jsx,.ts,.tsx --fix ./src"
    ```
